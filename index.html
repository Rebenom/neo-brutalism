<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OURBOOKS – Ink & Mind | One-Page (Wiwit)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* =========================
       THEME: Navy–Gold (Wiwit)
       ========================= */
    :root{
      --navy:#0a1a2f; /* biru navy */
      --navy-2:#0f2744; /* navy lebih terang */
      --gold:#d4af37; /* emas */
      --gold-2:#f5e6a1; /* aksen emas muda */
      --ink:#e9eef6; /* teks terang */
      --muted:#9fb0c7; /* teks sekunder */
      --card:#10233caa; /* kartu semi transparan */
      --danger:#ff5a76; /* merah lembut */
      --success:#3ddc97; /* hijau lembut */
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--navy);color:var(--ink);font-family:"Poppins",system-ui,Segoe UI,Roboto,Arial,sans-serif}
    a{color:var(--gold);text-decoration:none}
    a:hover{text-decoration:underline;opacity:.95}

    /* Background dekorasi halus */
    body::before{content:"";position:fixed;inset:0;z-index:-2;
      background:
        radial-gradient(1200px 600px at 120% -10%,rgba(212,175,55,.14),transparent 60%),
        radial-gradient(1000px 600px at -20% 110%,rgba(212,175,55,.10),transparent 60%),
        linear-gradient(180deg, #0b1d34 0%, #081628 100%);
    }
    body::after{content:"";position:fixed;inset:0;z-index:-1;opacity:.18;pointer-events:none;
      background-image: linear-gradient(90deg, transparent 95%, rgba(255,255,255,.04) 95%),
                        linear-gradient(0deg, transparent 95%, rgba(255,255,255,.04) 95%);
      background-size: 24px 24px;
      mask-image: radial-gradient(70% 70% at 50% 20%, black 60%, transparent 100%);
    }

    .container{max-width:1100px;margin:auto;padding:20px}

    /* =========================
       HEADER + NAV
       ========================= */
    header{position:sticky;top:0;z-index:10;background:rgba(10,26,47,.7);backdrop-filter:blur(6px);
      border-bottom:1px solid rgba(255,255,255,.06)}
    .topbar{display:flex;gap:16px;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px}
    .brand .logo{width:36px;height:36px;display:grid;place-items:center;border-radius:10px;
      background:rgba(212,175,55,.16);border:1px solid rgba(212,175,55,.45)}
    .brand .logo svg{width:20px;height:20px;fill:var(--gold)}
    .brand h1{font-size:1.1rem;margin:0}
    .nav{display:flex;gap:10px;flex-wrap:wrap}
    .nav button{background:rgba(255,255,255,.05);color:var(--ink);border:1px solid rgba(255,255,255,.08);
      padding:8px 12px;border-radius:10px;cursor:pointer}
    .nav button:hover{background:rgba(212,175,55,.12);border-color:rgba(212,175,55,.4)}
    .cart-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(212,175,55,.18);
      border:1px solid rgba(212,175,55,.45);padding:6px 10px;border-radius:999px}

    /* =========================
       CARDS & ELEMENTS
       ========================= */
    .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:18px;box-shadow:0 8px 24px rgba(0,0,0,.18)}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid-2{grid-template-columns:1fr 1fr}.grid-3{grid-template-columns:repeat(3,1fr)}}
    .heading{display:flex;align-items:center;gap:10px;margin:0 0 14px}
    .heading .icon{width:22px;height:22px;display:grid;place-items:center;border-radius:8px;background:rgba(212,175,55,.16);border:1px solid rgba(212,175,55,.4)}
    .heading .icon svg{width:15px;height:15px;fill:var(--gold)}
    .heading span{font-weight:600;letter-spacing:.3px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.06);color:var(--ink);cursor:pointer}
    .btn:hover{background:rgba(212,175,55,.12);border-color:rgba(212,175,55,.4)}
    .btn.gold{background:linear-gradient(135deg,var(--gold),#b58b18);border:none;color:#0a0a0a;font-weight:600}
    .btn.gold:hover{filter:brightness(.98)}
    .input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:rgba(8,22,40,.6);color:var(--ink)}
    label{font-size:.92rem;color:var(--muted)}
    .price{color:var(--gold)}
    .muted{color:var(--muted)}
    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(212,175,55,.6),transparent);margin:16px 0}
    .empty{padding:24px;border:1px dashed rgba(255,255,255,.2);border-radius:12px;text-align:center;color:var(--muted)}

    /* Buku item */
    .book{display:flex;gap:12px}
    .cover{width:72px;height:100px;border-radius:10px;overflow:hidden;background:rgba(255,255,255,.06);display:grid;place-items:center;border:1px solid rgba(255,255,255,.08)}
    .cover svg{width:64px;height:64px;opacity:.8}

    /* Section visibility */
    section{display:none;margin-top:18px}
    section.active{display:block}

    footer{margin:36px 0 20px;color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <header>
    <div class="container topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <!-- Logo: buku + tinta -->
          <svg viewBox="0 0 24 24" role="img" aria-label="Logo">
            <path d="M4 4h9a3 3 0 0 1 3 3v11H7a3 3 0 0 0-3 3V4z" fill="currentColor"/>
            <path d="M9 4h8a3 3 0 0 1 3 3v11a3 3 0 0 0-3-3H9V4z" fill="currentColor" opacity=".5"/>
          </svg>
        </div>
        <h1>OURBOOKS – <span style="color:var(--gold)">Ink & Mind</span></h1>
      </div>
      <div class="nav" role="navigation" aria-label="Navigasi">
        <button onclick="go('beranda')">Beranda</button>
        <button onclick="go('produk')">Daftar Buku</button>
        <button onclick="go('register')">Register</button>
        <button onclick="go('login')">Login</button>
        <button onclick="go('profil')">Profil</button>
        <button onclick="go('checkout')">Checkout</button>
        <span class="cart-badge" title="Keranjang" onclick="go('keranjang')">
          <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true"><path fill="currentColor" d="M7 18a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm10 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4ZM6.2 6h13.4l-1.3 7.4a3 3 0 0 1-3 2.6H9.1a3 3 0 0 1-3-2.4L4.2 3H2v2h1.5l2 11a5 5 0 0 0 4.9 4.1h6.2a5 5 0 0 0 4.9-4.2L23 4H6.4L6.2 6Z"/></svg>
          <span id="cartCount">0</span>
        </span>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- ========================= BERANDA ========================= -->
    <section id="beranda" class="active">
      <div class="card">
        <div class="heading"><div class="icon"><svg viewBox="0 0 24 24"><path d="M3 5h18v2H3V5Zm0 6h18v2H3v-2Zm0 6h18v2H3v-2Z"/></svg></div><span>Selamat datang di OURBOOKS</span></div>
        <p class="muted">Toko buku sederhana – konsep dari tugas <b>OURBOOKS – Ink & Mind</b>. Semua halaman digabung dalam satu file (register, login, produk, keranjang, checkout, profil, konfirmasi).</p>
        <div class="divider"></div>
        <div class="grid grid-3" id="featureCards"></div>
      </div>
    </section>

    <!-- ========================= DAFTAR PRODUK ========================= -->
    <section id="produk">
      <div class="card">
        <div class="heading"><div class="icon"><svg viewBox="0 0 24 24"><path d="M4 4h16v16H4z"/></svg></div><span>Daftar Buku</span></div>
        <div class="grid grid-3" id="bookList"></div>
      </div>
    </section>

    <!-- ========================= KERANJANG ========================= -->
    <section id="keranjang">
      <div class="card">
        <div class="heading"><div class="icon"><svg viewBox="0 0 24 24"><path d="M7 18a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm10 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4ZM6.2 6h13.4l-1.3 7.4a3 3 0 0 1-3 2.6H9.1a3 3 0 0 1-3-2.4L4.2 3H2v2h1.5l2 11a5 5 0 0 0 4.9 4.1h6.2a5 5 0 0 0 4.9-4.2L23 4H6.4L6.2 6Z"/></svg></div><span>Keranjang</span></div>
        <div id="cartItems" class="grid"></div>
        <div class="divider"></div>
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
          <div>
            <div>Subtotal: <b class="price" id="subtotal">Rp0</b></div>
            <small class="muted">*Belum termasuk ongkir</small>
          </div>
          <div style="display:flex;gap:8px">
            <button class="btn" onclick="clearCart()">Kosongkan</button>
            <button class="btn gold" onclick="go('checkout')">Lanjut ke Checkout</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ========================= CHECKOUT ========================= -->
    <section id="checkout">
      <form class="card" onsubmit="submitCheckout(event)">
        <div class="heading"><div class="icon"><svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm1 5v5.59l3.7 3.7-1.4 1.41L11 13V7h2Z"/></svg></div><span>Checkout</span></div>
        <div class="grid grid-2">
          <div>
            <label>Nama Penerima</label>
            <input class="input" id="coName" placeholder="Nama lengkap" required />
          </div>
          <div>
            <label>No. HP</label>
            <input class="input" id="coPhone" placeholder="08xxxxxxxxxx" required />
          </div>
          <div>
            <label>Alamat Lengkap</label>
            <textarea class="input" id="coAddress" rows="3" placeholder="Jalan, RT/RW, Kel/Desa, Kec, Kota/Kab, Provinsi" required></textarea>
          </div>
          <div>
            <label>Metode Pembayaran</label>
            <select class="input" id="coPay" required>
              <option value="">-- Pilih --</option>
              <option>Transfer Bank</option>
              <option>QRIS</option>
              <option>COD</option>
            </select>
          </div>
        </div>
        <div class="divider"></div>
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
          <div>Total: <b class="price" id="coTotal">Rp0</b></div>
          <button class="btn gold" type="submit">Buat Pesanan</button>
        </div>
      </form>
    </section>

    <!-- ========================= KONFIRMASI PESANAN ========================= -->
    <section id="konfirmasi">
      <div class="card" id="confirmBox">
        <div class="heading"><div class="icon"><svg viewBox="0 0 24 24"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21.6 6.4 20.2 5z"/></svg></div><span>Pesanan Dibuat</span></div>
        <p>Terima kasih! Pesanan kamu telah dibuat.</p>
        <div id="confirmDetail" class="muted"></div>
        <div class="divider"></div>
        <button class="btn" onclick="go('produk')">Kembali belanja</button>
      </div>
    </section>

    <!-- ========================= REGISTER ========================= -->
    <section id="register">
      <form class="card" onsubmit="registerUser(event)">
        <div class="heading"><div class="icon"><svg viewBox="0 0 24 24"><path d="M12 12a5 5 0 1 0 .001-10.001A5 5 0 0 0 12 12Zm0 2c-5 0-9 2.5-9 5.5V22h18v-2.5c0-3-4-5.5-9-5.5Z"/></svg></div><span>Registrasi Akun</span></div>
        <div class="grid grid-2">
          <div>
            <label>Nama</label>
            <input class="input" id="regName" placeholder="Wiwit Setya Ningsih" required />
          </div>
          <div>
            <label>Email</label>
            <input class="input" id="regEmail" type="email" placeholder="email@contoh.com" required />
          </div>
          <div>
            <label>No. HP</label>
            <input class="input" id="regPhone" placeholder="08xxxxxxxxxx" required />
          </div>
          <div>
            <label>Password</label>
            <input class="input" id="regPass" type="password" minlength="6" placeholder="minimal 6 karakter" required />
          </div>
        </div>
        <div class="divider"></div>
        <button class="btn gold" type="submit">Daftar</button>
      </form>
    </section>

    <!-- ========================= LOGIN ========================= -->
    <section id="login">
      <form class="card" onsubmit="loginUser(event)">
        <div class="heading"><div class="icon"><svg viewBox="0 0 24 24"><path d="M10 17v-2h4v2h-4Zm2-15a5 5 0 0 0-5 5v2H5v10h14V9h-2V7a5 5 0 0 0-5-5Z"/></svg></div><span>Login</span></div>
        <div class="grid grid-2">
          <div>
            <label>Email</label>
            <input class="input" id="logEmail" type="email" required />
          </div>
          <div>
            <label>Password</label>
            <input class="input" id="logPass" type="password" required />
          </div>
        </div>
        <div class="divider"></div>
        <button class="btn gold" type="submit">Masuk</button>
      </form>
    </section>

    <!-- ========================= PROFIL ========================= -->
    <section id="profil">
      <div class="card">
        <div class="heading"><div class="icon"><svg viewBox="0 0 24 24"><path d="M12 12a5 5 0 1 0 .001-10.001A5 5 0 0 0 12 12Zm0 2c-5 0-9 2.5-9 5.5V22h18v-2.5c0-3-4-5.5-9-5.5Z"/></svg></div><span>Profil Pengguna</span></div>
        <div id="profileBox" class="grid grid-2"></div>
        <div class="divider"></div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" onclick="logoutUser()">Logout</button>
          <button class="btn gold" onclick="go('produk')">Belanja Buku</button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">© <span id="y"></span> OURBOOKS – Ink & Mind • Dibuat oleh Wiwit • Tema <span style="color:var(--gold)">Navy–Gold</span></div>
  </footer>

  <script>
    // ========================= DATA DUMMY BUKU =========================
    const books = [
        {id:1, title:"Algoritma & Pemrograman", author:"D. Nugroho", price:89000, tag:"Informatika"},
        {id:2, title:"Struktur Data", author:"A. Pratama", price:99000, tag:"CS"},
        {id:3, title:"Jaringan Komputer", author:"S. Ramadhan", price:119000, tag:"Networking"},
        {id:4, title:"Basis Data", author:"M. Lestari", price:95000, tag:"Database"},
        {id:5, title:"Matematika Diskrit", author:"R. Wibowo", price:88000, tag:"Math"},
        {id:6, title:"Sistem Operasi", author:"N. Putri", price:109000, tag:"OS"},
        {id:1, title:"Computer Science: An Overview", author:"J. Glenn Brookshear & Dennis Brylow", price:450000, tag:"Computer Science"},
        {id:2, title:"Introduction to the Theory of Computation", author:"Michael Sipser", price:520000, tag:"Theory"},
        {id:3, title:"Operating System Concepts", author:"Abraham Silberschatz, Peter Galvin, Greg Gagne", price:600000, tag:"OS"},
        {id:4, title:"Artificial Intelligence: A Modern Approach", author:"Stuart Russell & Peter Norvig", price:750000, tag:"AI"},
        {id:5, title:"Computer Networking: A Top-Down Approach", author:"James F. Kurose & Keith W. Ross", price:580000, tag:"Networking"},
        {id:6, title:"Programming in Python 3", author:"Mark Summerfield", price:420000, tag:"Programming"},
        {id:7, title:"The Pragmatic Programmer", author:"Andrew Hunt & David Thomas", price:380000, tag:"Programming"},
        {id:8, title:"Clean Code: A Handbook of Agile Software Craftsmanship", author:"Robert C. Martin", price:500000, tag:"Programming"},
        {id:9, title:"Database System Concepts", author:"Abraham Silberschatz, Henry Korth, S. Sudarshan", price:570000, tag:"Database"},
        {id:10, title:"Introduction to Algorithms (CLRS)", author:"Cormen, Leiserson, Rivest, Stein", price:800000, tag:"Algorithms"}
    ];

    // ========================= UTIL =========================
    const fmt = n => new Intl.NumberFormat('id-ID').format(n);
    const save = (k,v)=>localStorage.setItem(k,JSON.stringify(v));
    const load = k => JSON.parse(localStorage.getItem(k)||'null');

    // ========================= NAVIGASI =========================
    function go(id){
      document.querySelectorAll('main section').forEach(s=>s.classList.remove('active'));
      const el = document.getElementById(id);
      if(el){el.classList.add('active');location.hash = id}
      if(id==='keranjang') renderCart();
      if(id==='produk') renderBooks();
      if(id==='profil') renderProfile();
      if(id==='checkout') updateCheckoutTotal();
    }
    window.addEventListener('hashchange',()=>go(location.hash.replace('#','')||'beranda'));

    // ========================= RENDER BERANDA =========================
    const features=[
      {t:"Register", d:"Buat akun baru dengan data sederhana.", id:"register"},
      {t:"Login", d:"Masuk untuk menyimpan profil & pesanan.", id:"login"},
      {t:"Daftar Buku", d:"Jelajahi buku-buku informatika.", id:"produk"},
    ];
    function renderFeatures(){
      const wrap=document.getElementById('featureCards');
      wrap.innerHTML='';
      features.forEach(f=>{
        const card=document.createElement('div');
        card.className='card';
        card.innerHTML=`<h3 style="margin:0 0 8px">${f.t}</h3><p class="muted" style="margin:0 0 12px">${f.d}</p><button class="btn gold" onclick="go('${f.id}')">Buka</button>`;
        wrap.appendChild(card);
      })
    }

    // ========================= RENDER BUKU =========================
    function bookSVG(title){
      const initials = title.split(' ').slice(0,2).map(w=>w[0]).join('').toUpperCase();
      return `
      <svg viewBox="0 0 120 160" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#d4af37" stop-opacity=".8"/>
            <stop offset="100%" stop-color="#a88213" stop-opacity=".8"/>
          </linearGradient>
        </defs>
        <rect x="8" y="8" width="104" height="144" rx="10" fill="url(#g)"/>
        <text x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" font-size="42" font-family="Poppins" fill="#0a1a2f" font-weight="700">${initials}</text>
      </svg>`;
    }

    function renderBooks(){
      const list=document.getElementById('bookList');
      list.innerHTML='';
      books.forEach(b=>{
        const item=document.createElement('div');
        item.className='card book';
        item.innerHTML=
          `<div class="cover">${bookSVG(b.title)}</div>
           <div style="flex:1">
              <div style="display:flex;justify-content:space-between;gap:8px;align-items:center">
                <div>
                  <h3 style="margin:0 0 6px">${b.title}</h3>
                  <div class="muted" style="font-size:.9rem">${b.author} • ${b.tag}</div>
                </div>
                <div class="price">Rp${fmt(b.price)}</div>
              </div>
              <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
                <button class="btn" onclick="addToCart(${b.id})">Tambah ke Keranjang</button>
                <button class="btn gold" onclick="buyNow(${b.id})">Beli Sekarang</button>
              </div>
           </div>`;
        list.appendChild(item);
      })
    }

    // ========================= KERANJANG =========================
    function getCart(){return load('cart')||[]} 
    function setCart(c){save('cart',c);updateCartBadge()}
    function updateCartBadge(){
      const c=getCart().reduce((a,it)=>a+it.qty,0);
      document.getElementById('cartCount').textContent=c;
    }
    function addToCart(id){
      const cart=getCart();
      const idx=cart.findIndex(i=>i.id===id);
      if(idx>-1) cart[idx].qty++; else cart.push({id,qty:1});
      setCart(cart);
    }
    function buyNow(id){
      setCart([{id,qty:1}]);
      go('checkout');
    }
    function changeQty(id,delta){
      const cart=getCart();
      const idx=cart.findIndex(i=>i.id===id);
      if(idx>-1){
        cart[idx].qty+=delta;
        if(cart[idx].qty<=0) cart.splice(idx,1);
        setCart(cart); renderCart(); updateCheckoutTotal();
      }
    }
    function removeItem(id){
      const cart=getCart().filter(i=>i.id!==id);
      setCart(cart); renderCart(); updateCheckoutTotal();
    }
    function clearCart(){ setCart([]); renderCart(); updateCheckoutTotal(); }

    function renderCart(){
      const wrap=document.getElementById('cartItems');
      const cart=getCart();
      if(!cart.length){wrap.innerHTML=`<div class="empty">Keranjang kosong. Ayo <a href="#" onclick="go('produk')">pilih buku</a> dulu.</div>`; updateCartBadge();document.getElementById('subtotal').textContent='Rp0';return}
      wrap.innerHTML='';
      let sum=0;
      cart.forEach(it=>{
        const b=books.find(x=>x.id===it.id); if(!b) return;
        const line=b.price*it.qty; sum+=line;
        const row=document.createElement('div');
        row.className='card book';
        row.innerHTML=
          `<div class="cover">${bookSVG(b.title)}</div>
           <div style="flex:1">
             <div style="display:flex;justify-content:space-between;gap:8px;align-items:center">
               <div>
                 <h3 style="margin:0 0 6px">${b.title}</h3>
                 <div class="muted" style="font-size:.9rem">${b.author} • ${b.tag}</div>
               </div>
               <div class="price">Rp${fmt(line)}</div>
             </div>
             <div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
               <button class="btn" onclick="changeQty(${b.id},-1)">-</button>
               <span>${it.qty}</span>
               <button class="btn" onclick="changeQty(${b.id},1)">+</button>
               <button class="btn" onclick="removeItem(${b.id})">Hapus</button>
             </div>
           </div>`;
        wrap.appendChild(row);
      });
      document.getElementById('subtotal').textContent='Rp'+fmt(sum);
      updateCartBadge();
    }

    // ========================= CHECKOUT =========================
    function getTotal(){
      const cart=getCart();
      return cart.reduce((s,it)=>{
        const b=books.find(x=>x.id===it.id); return s + (b?b.price*it.qty:0);
      },0);
    }
    function updateCheckoutTotal(){
      const t=getTotal();
      const el=document.getElementById('coTotal'); if(el) el.textContent='Rp'+fmt(t);
    }
    function submitCheckout(e){
      e.preventDefault();
      const name=coName.value.trim();
      const phone=coPhone.value.trim();
      const addr=coAddress.value.trim();
      const pay=coPay.value;
      if(!getCart().length){alert('Keranjang masih kosong.'); go('produk'); return}
      const orderId='ORD'+Date.now().toString().slice(-6);
      const total='Rp'+fmt(getTotal());
      clearCart();
      document.getElementById('confirmDetail').innerHTML=
        `<div><b>No. Order:</b> ${orderId}</div>
         <div><b>Nama:</b> ${name}</div>
         <div><b>Telp:</b> ${phone}</div>
         <div><b>Alamat:</b> ${addr}</div>
         <div><b>Pembayaran:</b> ${pay}</div>
         <div><b>Total:</b> ${total}</div>`;
      go('konfirmasi');
    }

    // ========================= AUTH (SIMPLE LOCAL) =========================
    function registerUser(e){
      e.preventDefault();
      const user={
        name:regName.value.trim(),
        email:regEmail.value.trim().toLowerCase(),
        phone:regPhone.value.trim(),
        pass:regPass.value
      };
      save('user',user);
      alert('Registrasi berhasil. Silakan login.');
      go('login');
    }
    function loginUser(e){
      e.preventDefault();
      const u=load('user');
      if(!u){alert('Belum ada akun. Silakan registrasi.'); go('register'); return}
      if(u.email===logEmail.value.trim().toLowerCase() && u.pass===logPass.value){
        save('session',{email:u.email, time:Date.now()});
        alert('Login berhasil.');
        go('profil');
      }else{
        alert('Email atau password salah.');
      }
    }
    function logoutUser(){
      localStorage.removeItem('session');
      alert('Logout berhasil.');
      go('login');
    }

    function renderProfile(){
      const box=document.getElementById('profileBox');
      const u=load('user');
      const s=load('session');
      if(!s||!u){ box.innerHTML=`<div class="empty">Belum login. Silakan <a href="#" onclick="go('login')">login</a> dulu.</div>`; return }
      box.innerHTML=`
        <div class="card">
          <p class="muted" style="margin:0 0 6px">Nama</p>
          <div style="font-weight:600">${u.name}</div>
          <div class="divider"></div>
          <p class="muted" style="margin:0 0 6px">Email</p>
          <div>${u.email}</div>
          <div class="divider"></div>
          <p class="muted" style="margin:0 0 6px">No. HP</p>
          <div>${u.phone}</div>
        </div>
        <div class="card">
          <p class="muted">Motto</p>
          <div style="margin-bottom:10px">Butuh bukti, bukan janji.</div>
          <button class="btn" onclick="go('produk')">Lihat Daftar Buku</button>
          <div class="divider"></div>
          <p class="muted">Ringkasan</p>
          <div>Mahasiswa STIMIK Tunas Bangsa Banjarnegara. Minat: Ilmu Komputer & Informatika.</div>
        </div>`;
    }

    // ========================= INIT =========================
    document.getElementById('y').textContent=new Date().getFullYear();
    renderFeatures();
    renderBooks();
    updateCartBadge();
    go(location.hash.replace('#','')||'beranda');
  </script>
</body>
</html>